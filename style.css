:root{
  --page-bg: linear-gradient(180deg,#f8fafc 0%, #ffffff 100%);
  --card-bg: rgba(255,255,255,0.72);
  --card: #ffffff;
  --muted:#64748b; --accent:#0f172a; --accent-2:#60a5fa;
  --btn-bg: var(--accent); --btn-text: #ffffff;
  --btn-ghost-border: 1px solid rgba(2,6,23,0.06);
  --input-border: 1px solid rgba(2,6,23,0.06);
  --badge-bg: linear-gradient(90deg,#eef2ff,#f8fafc);
  --badge-text: #0f172a;
  --success:#16a34a; --danger:#ef4444;
  --card-shadow: 0 6px 18px rgba(16,24,40,0.04);
  --radius:12px; --ease:220ms cubic-bezier(.2,.9,.2,1);

  /* sizing tokens */
  --btn-vertical-padding:8px; --btn-horizontal-padding:12px;
  --input-vertical-padding:10px; --input-horizontal-padding:12px;
  --thumb-size:56px;
}
body.dark{
  --page-bg: linear-gradient(180deg,#041325 0%, #071025 100%);
  --card-bg: rgba(7,20,34,0.55); --card:#071422; --muted:#9fb0c8; --accent:#e6eef6; --accent-2:#60a5fa;
  --btn-bg: #0ea5a4; --btn-text: #06202a;
  --btn-ghost-border: 1px solid rgba(255,255,255,0.06);
  --input-border: 1px solid rgba(255,255,255,0.04);
  --badge-bg: linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
  --badge-text: var(--accent); --card-shadow: 0 8px 26px rgba(2,6,23,0.6);
}

body.transparent{ --card-bg: transparent; --card-shadow: none; --input-border: 1px solid rgba(2,6,23,0.04); }
body.dark.transparent{ --card-bg: rgba(7,20,34,0.12); --card-shadow: none; --input-border: 1px solid rgba(255,255,255,0.06); }

*{box-sizing:border-box}
html,body{height:100%}
body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; margin:0; background:var(--page-bg); color:var(--accent); transition:background var(--ease), color var(--ease); -webkit-font-smoothing:antialiased}

body.compact .wrap{max-width:900px;padding:12px}
body.compact .card{padding:10px;border-radius:10px}
body.compact .goal{padding:8px}

.wrap{max-width:980px; margin:24px auto; padding:16px}
header{display:flex; align-items:center; justify-content:space-between; gap:12px}
h1{font-size:19px; margin:0}
p.lead{margin:6px 0 0; color:var(--muted); font-size:13px}

.grid{display:grid; grid-template-columns:320px 1fr; gap:14px; margin-top:14px}
@media (max-width:820px){.grid{grid-template-columns:1fr}}

.card{background:var(--card-bg); padding:14px; border-radius:var(--radius); box-shadow:var(--card-shadow); border:var(--input-border); transition:background var(--ease), box-shadow var(--ease), transform 220ms ease, backdrop-filter var(--ease); backdrop-filter: blur(6px)}
.card:active{transform:translateY(1px)}

label{display:block; font-size:13px; color:var(--muted); margin-bottom:6px}
input[type=text], input[type=number], textarea, select{width:100%; padding:var(--input-vertical-padding) var(--input-horizontal-padding); border-radius:10px; border:var(--input-border); font-size:14px; background:transparent; color:var(--accent); transition:box-shadow var(--ease), border-color var(--ease), background-color var(--ease)}
input[type=text]:focus, input[type=number]:focus, textarea:focus, select:focus{outline:none; box-shadow:0 12px 30px rgba(99,102,241,0.06); border-color:rgba(99,102,241,0.25)}

.row{display:flex; gap:8px}
.btn{display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:var(--btn-vertical-padding) var(--btn-horizontal-padding); border-radius:10px; background:var(--btn-bg); color:var(--btn-text); border:0; cursor:pointer; font-weight:700; font-size:13px; transition:transform 120ms var(--ease), box-shadow 120ms var(--ease), opacity 120ms var(--ease)}
.btn:hover{transform:translateY(-3px); box-shadow:0 8px 20px rgba(2,6,23,0.06)}
.btn:active{transform:translateY(-1px)}
.btn:focus{outline:2px solid rgba(99,102,241,0.14); outline-offset:3px}
.btn.ghost{background:transparent; color:var(--accent); border:var(--btn-ghost-border); box-shadow:none}
.btn.ghost:hover{background:rgba(99,102,241,0.05)}

.muted{color:var(--muted); font-size:13px}
.search{width:220px; padding:8px 10px; border-radius:10px; border:var(--input-border); background:transparent; color:var(--accent)}

.goals{display:flex; flex-direction:column; gap:10px}
.goal{display:flex; gap:12px; align-items:center; padding:10px; border-radius:10px; transition: transform .18s ease, box-shadow .18s ease}
.goal.completed{opacity:0.95; box-shadow:0 6px 12px rgba(20,160,80,0.06); border-left:4px solid var(--success)}
.goal .meta{flex:1}
.goal h3{margin:0; font-size:14px; display:flex; gap:8px; align-items:center}
.meta .small{font-size:12px; color:var(--muted); margin-top:6px}

.progress-wrap{height:10px; background:linear-gradient(180deg, rgba(0,0,0,0.02), rgba(0,0,0,0.02)); border-radius:999px; overflow:hidden; margin-top:8px}
.progress{height:100%; width:0%; background:linear-gradient(90deg,var(--accent-2),var(--accent)); transition:width 600ms cubic-bezier(.2,.9,.2,1)}

.controls{display:flex; gap:8px; margin-top:8px; align-items:center}
.controls input[type=number]{width:110px}
.tiny{font-size:12px; padding:7px 9px; border-radius:8px}
.danger{background:var(--danger); color:white}
.success{background:var(--success); color:white}

.meta-right{display:flex; gap:8px; align-items:center}
.badge{background:var(--badge-bg); color:var(--badge-text); padding:6px 10px; border-radius:999px; font-size:13px; border:var(--input-border)}

.empty{padding:24px; text-align:center; color:var(--muted); border-radius:8px}
.muted-2{color:#94a3b8; font-size:12px} .muted-kv{font-size:12px; color:var(--muted)}

.thumb{width:var(--thumb-size); height:var(--thumb-size); border-radius:8px; object-fit:cover; border:var(--input-border); background:linear-gradient(180deg, rgba(0,0,0,0.03), rgba(0,0,0,0.03))}

.link-icon{display:inline-flex; width:18px; height:18px; align-items:center; justify-content:center; border-radius:4px; text-decoration:none; color:var(--accent); background:transparent; border:1px solid transparent; transition:background .12s ease, transform .12s ease}
.link-icon:hover{background:rgba(99,102,241,0.06); transform:translateY(-2px)}

@keyframes fadeInUp{ from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:none} }
.goal{ animation: fadeInUp .22s ease both }
.pulse{ animation: pulse .7s ease }
@keyframes pulse{ 0%{ transform:scale(1)} 50%{ transform:scale(1.02)} 100%{ transform:scale(1)} }

/* overlay modal for settings */
.overlay{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(2,6,23,0.45); backdrop-filter: blur(6px); z-index:80; opacity:0; pointer-events:none; transition:opacity .18s ease}
.overlay.open{opacity:1; pointer-events:auto}
.modal{width:520px; max-width:94%; background:var(--card-bg); border-radius:12px; padding:16px; border:var(--input-border); box-shadow:0 20px 50px rgba(2,6,23,0.6); transform:translateY(10px); transition:transform .18s ease, opacity .18s ease}
.overlay.open .modal{ transform:none }
.modal h2{margin:0 0 6px}

/* fancy custom dropdown */
.custom-dropdown{position:relative; user-select:none}
.custom-dropdown .selected{display:flex; align-items:center; justify-content:space-between; gap:8px; padding:10px 12px; border-radius:8px; border:var(--input-border); cursor:pointer; background:transparent}
.custom-dropdown .selected:after{content:''; width:14px; height:14px; background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='%2364748b' d='M7 10l5 5 5-5z'/></svg>"); background-repeat:no-repeat; background-position:center; transform-origin:center; transition:transform .18s ease}
.custom-dropdown.open .selected:after{ transform:rotate(180deg) }
.custom-dropdown .options{position:absolute; left:0; right:0; margin-top:8px; background:var(--card-bg); border:var(--input-border); box-shadow:0 10px 30px rgba(2,6,23,0.08); border-radius:8px; max-height:210px; overflow:auto; z-index:30; padding:6px}
.custom-dropdown .option{padding:8px 10px; border-radius:6px; cursor:pointer}
.custom-dropdown .option:hover{background:rgba(99,102,241,0.06)}
.custom-dropdown .option.active{background:rgba(99,102,241,0.08)}

@media (max-width:520px){ .search{width:140px} .thumb{width:48px; height:48px} }
